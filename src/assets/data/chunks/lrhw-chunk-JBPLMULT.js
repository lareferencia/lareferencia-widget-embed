import{a as S}from"./lrhw-chunk-XZZ7DFBR.js";import{a as h}from"./lrhw-chunk-EAIJTMU4.js";import{g as u,i as f,j as x,k as v}from"./lrhw-chunk-B4NHSJ6U.js";f();var y=u(x());f();var d=(n,a)=>{let c=[];return typeof a=="string"?(n.time.buckets.map(r=>{var p,m,s;let e=r.level.buckets.find(t=>t.key===a),o=((p=e==null?void 0:e.views)==null?void 0:p.value)||0,i=((m=e==null?void 0:e.downloads)==null?void 0:m.value)||0,l=((s=e==null?void 0:e.outlinks)==null?void 0:s.value)||0;c.push(o+i+l)}),c):(n.time.buckets.map(r=>{var i;let e=r.level.buckets.find(l=>l.key===a.scope),o=((i=e==null?void 0:e[a.event])==null?void 0:i.value)||0;c.push(o)}),c)};var g=u(v()),w=["views","downloads","conversions","outlinks"],L=["L","N","R"],k=({data:n,scopeLabels:a,eventLabels:c,activeScope:r})=>{let e=(0,y.useRef)(null);return(0,y.useEffect)(()=>{let o=S(e.current);if(e.current){let i=[];r==="ALL"?L.map(s=>{i.push({name:`${a[s]}`,type:"bar",stack:"total",itemStyle:{color:h(s,"ALL")},data:d(n,s)})}):w.map(t=>({scope:r,event:t})).forEach(t=>{i.push({name:`${a[t.scope]} - ${c[t.event]}`,type:`${t.event==="conversions"?"line":"bar"}`,yAxisIndex:`${t.event==="conversions"?1:0}`,stack:`${t.event==="conversions"?"":"total"}`,itemStyle:{color:h(t.scope,t.event)},data:d(n,t)})});let l=n.time.buckets.slice(-12).map(s=>s.key_as_string.toString().slice(0,7)),p={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{show:!1},grid:{left:"2%",right:"2%",bottom:"10%",containLabel:!1},yAxis:[{type:"value",name:"Total Access",nameTextStyle:{fontWeight:"bold",fontSize:13},show:!1},{type:"value",name:"Conversions",nameTextStyle:{fontWeight:"bold",fontSize:13},show:!1,alignTicks:!0,axisLine:{show:!0,lineStyle:{color:"#6e9ef1"}},axisLabel:{formatter:"{value}"}}],xAxis:{type:"category",data:l},series:i},m=()=>{o&&o.resize()};return window.addEventListener("resize",m),p&&o.setOption(p),()=>{window.removeEventListener("resize",m),o.dispose()}}},[r]),(0,g.jsx)("div",{id:"bar-chart",ref:e,style:{height:"200px"}})},R=k;export{R as default};
